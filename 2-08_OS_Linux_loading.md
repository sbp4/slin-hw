# Домашнее задание к занятию "2.7 Загрузка ОС"

---

### Задание 1

Пользователь решил сделать мультизагрузку и установил себе на жесткий диск сначала ОС Windows, затем две одинаковых ОС Linux (все ОС в разные разделы). 

Сколько загрузчиков будет в такой системе?

*Приведите ответ в свободной форме со своим комментарием.*

***Ответ:***

Насколько я понимаю, в такой системе будет три загрузчика: bootmgr (ntldr в замисимости от версии Windows), GRUB Linux 1 и GRUB Linux 2 (хотя есть возможность установить Linux без загрузчика, но мы об этом не знаем :)). Основным загрузчиком будет GRUB (в зависимости от конфигурации первого или второго дистрибутива). Он будет загружать оба дистрибутива Linux с разных разделов, в зависимости от выбора на начальном этапе загрузки. Загрузчик GRUB второго дистрибутива будет установлен в загрузочный сектор раздела, но не будет использоваться. Для запуска Windows, основной загрузчик GRUB передаст процесс загрузки на bootmgr (ntldr). Он в свою очередь загрузит ОС Windows. Таким образом, установлено будет три загрузчика, а ИСПОЛЬЗОВАТЬСЯ будет всего два.

При определенном желании можно сделать основным загрузчиком bootmgr, который уже будет передавать управление в GRUB. И он, в свою очередь, будет запускать необходимую копию Linux.

---

### Задание 2

На лекции мы рассмотрели загрузку ядра и дополнительных модулей. Почему сразу не сделано ядро со всеми модулями? Так бы смогли избавиться от `initrd`...

*Приведите ответ в свободной форме со своим комментарием.*

***Ответ:***

В нашем случае, есть несколько причин, почему лучше загружать ядро и дополнительные модули. Во-первых, если мы загрузим все модули в ядро, мы увеличим его размер. Это не лучшим образом скажется на универсальности ядра при использовании его на различных конфигурациях. Во-вторых, если в пересобранном с модулями ядре произойдет сбой, упадет вся система. К примеру, если мы решим обновить драйвер устройства и пересобрать ядро. А новый драйвер, по какой-то причине, откажется работать с устройством. В конфигурации же с initrd у нас просто не запустится данное устройство. При этом система загрузится. Таким образом, система при использовании initrd будет более отказоустойчива.

---

## Дополнительные задания (со звездочкой*)
Эти задания дополнительные (необязательные к выполнению) и никак не повлияют на получение вами зачета по этому домашнему заданию. Вы можете их выполнить, если хотите глубже и/или шире разобраться в материале.

### Задание 3

Существует ли возможность создать несколько загрузчиков в одной системе?

*Приведите ответ в свободной форме со своим комментарием.*

***Ответ:***

Такая возможность существует. К примеру, в Задание №1 мы рассматривали вариант установки ОС Windows и ОС Linux в режиме мультизагрузки. Кроме этого, есть вариант установки нескольких загрузчиков в одну ОС Linux, к примеру GRUB, ELILO и PXELINUX. Единственное, активным может быть только один из установленных загрузчиков.

---

### Задание 4

Существует ли возможность загрузить несколько ядер ОС?

Например, ОС Linux является многопользовательской и разные пользователи хотят загрузить разные версии ядра.

*Приведите ответ в свободной форме со своим комментарием.*

***Ответ:***

Насколько я понимаю, в одной физической системе под разными пользователями нельзя загрузить разные ядра одновременно. Т.е каждый пользователь системы будет работать с тем ядром, которое загрузилось при старте системы. Так как запущенное ядро со всеми запущенными модулями не сможет передать управление другому ядру в реальном времени. Можно запустить систему с другим ядром, но тогда все пользователи будут работать с другим ядром. Однако, если все таки необходимо загрузить для разных пользователей разные версии ядра, как мне кажется, можно использовать гостевые виртуальные машины. Таким образом на одной физической системе у нас будет запущено несколько разных версий ядра под разными пользователями. Только один пользователь будет работать на хосте, а другой на виртуальной машине. Недостаток такого подхода - использование дополнительных ресурсов под гостевую виртуальную машину.

------

### Задание 5

Существует такой вид виртуализации как контейнеризация: контейнеры создаются на уровне ОС и работают в изолированных пространствах.

**Вопрос:** что произойдет, если в хостовой ОС установлен `upstart`, а в запущенном контейнере - `systemd`?

*Приведите ответ в свободной форме со своим комментарием.*

***Ответ:***

Насколько я понимаю механизм работы контейнеров, обе системы будут работать. Другое дело, насколько стабильно? По идее, сбоев не должно быть потому, что в режиме контейнера система использует только хостовое ядро, но загружает свое собственное окружение, в т.ч. и собственную систему инициализации. Основной вопрос, поддерживает ли ядро хостовой ОС другую систему инициализации (systemd)? Насколько я знаю, некоторые дистрибутивы работают только с upstart'ом и при переходе на systemd возникают "некоторые" сложности в виде танцев "с бубном".

------

### Задание 6

Замените заставку в GRUB

*Приведите ответ в виде принт-скрина.*

***Ответ:***

<a href="https://ibb.co/S7Y3zqc"><img src="https://i.ibb.co/zH94zKF/6-1.png" alt="6-1" border="0"></a>