# Домашнее задание к занятию "2.5 Файловые системы "

---

### Задание 1

Чем hardlink отличается от softlink?

*Приведите ответ в свободной форме.*

***Ответ:***

Softlink и hardlink или символические и жесткие ссылки. Отличаются друг от друга следующим. Softlink больше похожа на обычный ярлык Windows. Она содержит адрес нужного файла или директории в файловой системе. При открытии такой ссылки открывается целевой файл или директория. При удалении целевого файла или директории softlink будет указывать в никуда, так как целевых объектов больше не сущесвует. Softlink может ссылаться как на файл, так и на каталог, расположенные как на текущем диске, так и на других логических или физических дисках. Hardlink же может ссылаться только на файл, расположенный в определенном месте жесткого диска. Кроме этого, для hardlink есть ограничение: она не может ссылаться, во-первых, в принципе на директорию, во-вторых, на файл, расположенный на другом жестком диске. Важно то, что каждая из hardlink - это отдельный файл, ведущий на определенное место жесткого диска. При создании hardlink все разрешения исходного файла наследуются. При удалении одной hardlink, другая все равно откроет необходимый файл со всем его содержимым. Так проиходит потому, что вся информация о файле привязана не к его имени, а к индексному дескриптору (inode), в котором указаны сведения об этом файле. Имя файла, ссылающегося на его inode, является жесткой ссылкой. В случае с hardlink, файл можно удалить из системы только, если удалить все hardlink'и.

---

### Задание 2

* Создайте файл `~/netology`. 
* Создайте каталог `~/netology/`. 
* Поместите файл `netology` в каталог `netology`. 

*Какое(ие) из трех действий выполнить невозможно? Почему?*

***Ответ:***
Невозможно выполнить 2 и 3 действия, так как невозможно создать директорию с таким же именем как и файл. Данные действия невозможно сделать потому, что в Linux и файл, и каталог - суть файлы. Мы не можем создать два файла с одинаковым именем на одной файловой системе. Нам не даст это сделать индексный дескриптор (inode), в котором хранятся все метаданные о файле. Но есть вариант, когда мы можем обмануть систему и назвать и файл, и каталог одинаковым именем. Вдруг нам это жизненно необходимо? Для этого, в заглавии файла и каталога мы должны использовать строчну и прописную буквы. Что произойдет в этом случае? Мы создадим два файла (файл и каталог) с разными inode'ами и сможем избежать конфликта в системе.

---

## Дополнительные задания (со звездочкой*)
Эти задания дополнительные (необязательные к выполнению) и никак не повлияют на получение вами зачета по этому домашнему заданию. Вы можете их выполнить, если хотите глубже и/или шире разобраться в материале.

### Задание 3

* Как посмотреть количество `inodes`?
* В каких файловых системах не может возникнуть проблемы нехватки `inodes`?

*Приведите ответ в свободной форме.*

***Ответ:***
1. Мы можем посмотреть количество inodes по команде: df -i и df -hTi
2. Проблемы нехватки inodes не может возникнуть в файловых системах с динамической таблицей inode. К примеру, btrfs. Кроме btrfs, есть еще ReiserFS (и ее следующее поколение Reiser4). На сегодня эта файловая система поддерживается не во всех дистрибутивах. Также такой проблемы не должно возникнуть в сетевых (NFS) и распределенных файловых системах (GlusterFS).

---

### Задание 4

* Подключите к системе новый диск 1Гб. 
* Добавьте его в новую `volume group` с названием `netology_test`.
* Используя всё доступное пространство в `volume group` создайте `logical volume` и разметьте его как `xfs`.
* Добавьте еще один диск 1Гб в систему и добавьте его в ту же `volume group`.
* Используя половину нового доступного пространства расширьте `logical volume`.
* Расширьте файловую систему на новое свободное пространство. 

*В качестве ответа приложите скриншот вывода команды `df -Th, vgs,lvs`.*

***Ответ:***

Вывод реализации первых трех пунктов:

<a href="https://ibb.co/TLC99Mx"><img src="https://i.ibb.co/HdJ55Tf/4-1.png" alt="4-1" border="0"></a>

Вывод реализации последующих трех пунктов:

<a href="https://ibb.co/WFXbLtj"><img src="https://i.ibb.co/BjJX9NF/4-2.png" alt="4-2" border="0"></a>

---

### Задание 5

Создайте файловую систему `Btrfs` на двух дисках размером 5Гб каждый.

*Сколько будет доступно место для работы с файлами?*

***Ответ:***

В моем случае, при создании файловой системы на двух дисках, размером 5Гб каждый, мне осталось доступным для работы с файлами всего 8Гб из 10Гб общего объема. Все остальное заняла файловая система.

<a href="https://ibb.co/Np47TjB"><img src="https://i.ibb.co/J2hC37J/5-1.png" alt="5-1" border="0"></a>

Но меня заинтересовало, что будет, к примеру, если мы создадим логический том с btrfs из двух физических дисков по 5Гб каждый? При создании логического тома, я наблюдал немного иную ситуацию. Мне стало доступным 9 Гб из 10 Гб общего объема.

<a href="https://ibb.co/gR2yLXL"><img src="https://i.ibb.co/bK01MyM/5-2.png" alt="5-2" border="0"></a>

Предположу, что более эффективно использовать файловую систему btrfs в конфигурации с логическими томами, чем с сабвольюмами.