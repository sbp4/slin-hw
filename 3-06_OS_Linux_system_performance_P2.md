# Домашнее задание к занятию "3.6 Производительность системы. Часть 2."

------

### Задание 1.

Составьте задание через утилиту `cron` на проверку обьема кэша-обновлений еженедельно.

*Приведите ответ в виде команды.*

***Ответ:***

Есть два варианта команды:

1. 0 3 * * 1 du -sh /var/log/apt  >> /home/bakaras/cronrep.log && date -R >> /home/bakaras/cronrep.log -  для трудолюбивых
2. @weekly du -sh /var/log/apt >> /home/bakaras/cronrep.log && date -R >> /home/bakaras/cronrep.log -  для ленивых)

------

### Задание 2.

- Установите `cpufreq`; 
- Выполните настройку на режим сохранения энергии; 
- Выполните настройку полной производительности.

Сравните результаты.

*Проведите развернутый ответ и приложите снимки экрана.*

***Ответ:***

Установка cpufreq проходила очень сложно. На моих вируальных машинах программа не работала. Пришлось устанавливать систему на отдельной машине. В итоге была установлена Debian 8, на нее установлен пакет cpufrequtils. В результате удалось выполнить настройку системы на режим сохранения энергии и на режим полной производиетльности. Скрины ниже:

1. Режим сохранения энергии:

<a href="https://ibb.co/9T0WpZH"><img src="https://i.ibb.co/583L1Kh/2-1.png" alt="2-1" border="0"></a>

2. Режим полной производительности: 

<a href="https://ibb.co/1RbsjxG"><img src="https://i.ibb.co/F8nsCt4/2-2.png" alt="2-2" border="0"></a>

В тестах система, как и предполагалось, начала "подтормаживать" в режиме сохранения энергии, регулятор (governor) powersave. Ядра работали на частоте 800 МГц, что видно на скринах. После перевода системы в режим производительности, регулятор performance, скорость отклика возросла. Ядра стали работать на частоте 2500 МГц. Система стала более отзывчивой, что почувствовалось даже на процессоре Core 2 Duo. 

Как выяснилось в результате тестов, идеальный выбор регулятора - ondemand. Данный регулятор увеличивает частоту работы процессора, если увеличивается количество процессов в системе. И уменьшает частоту, когда все процессы отработаны. В результате, снижается энергопотребление, а процессор не перегревается.

------

### Задание 3.

Настройте приоритет использвоания `swap` в пропорции:

- 30/70; 
- 50/50;
- 70/30.

Запустите браузер и нагрузите память. 

Проанализируйте результат.

*Проведите развернутый ответ и приложите снимки экрана.*

***Ответ:***

1. 30/70

<a href="https://ibb.co/zHxZ9gj"><img src="https://i.ibb.co/4gtpvL9/3-1.png" alt="3-1" border="0"></a>

2. 50/50

<a href="https://ibb.co/r7yp4xC"><img src="https://i.ibb.co/4mNSP86/3-2.png" alt="3-2" border="0"></a>

3. 70/30

<a href="https://ibb.co/BsxSff7"><img src="https://i.ibb.co/3hqLTT8/3-3.png" alt="3-3" border="0"></a>

В результате проведенного тестирования, в моем случае, были получены следующие результаты: 
1. `swap` всегда подключался при использовании оперативной памяти на 80%; 
2. при при использовании приоритета 30/70 и идентичной нагрузке памяти задачами браузера, `swap` использовался на 15,8%, браузер сильно "подвисал";
3. при при использовании приоритета 50/50 и идентичной нагрузке памяти задачами браузера, `swap` использовался на 22,8%, браузер "подвисал", но уже не так сильно;
4. при при использовании приоритета 70/30 и идентичной нагрузке памяти задачами браузера, `swap` использовался на 21,7%, браузер работал увереннее, чем при 50/50. Картинка и звук во всех окнах не "тормозили";

Вывод: в моем случае, идельным будет использование приоритета 70/30. Ряд источников говорит о том, что на серверах следует использовать настройки приоритета от 1 до 20. Предположу, что данный приоритет нужно настраивать при условии большого объема оперативной памяти на серверной системе. 

------

## Дополнительные задания (со звездочкой*)
Эти задания дополнительные (необязательные к выполнению) и никак не повлияют на получение вами зачета по этому домашнему заданию. Вы можете их выполнить, если хотите глубже и/или шире разобраться в материале.

### Задание 4.

- Запустите процесс копирования большого файла (1 ГГб) на жесткий диск. 
- Запустите команду `iostat`. 
- Запустите `iotop`.

Какие процессы влияют на данные команды?

*Проведите развернутый ответ и приложите снимки экрана.*

***Ответ:***


